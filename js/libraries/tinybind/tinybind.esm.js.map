{"version":3,"file":"tinybind.esm.js","sources":["../src/constants.js","../src/parsers.js","../src/tinybind.js","../src/observer.js","../src/bindings.js","../src/view.js","../src/adapter.js","../src/binders.js","../src/formatters.js","../src/component.js","../src/export.js"],"sourcesContent":["export const OPTIONS = [\r\n  'prefix',\r\n  'templateDelimiters',\r\n  'rootInterface',\r\n  'preloadData',\r\n  'handler'\r\n]\r\n\r\nexport const EXTENSIONS = [\r\n  'binders',\r\n  'formatters',\r\n  'adapters'\r\n]","const PRIMITIVE = 0\r\nconst KEYPATH = 1\r\nconst TEXT = 0\r\nconst BINDING = 1\r\n\r\nconst QUOTED_STR = /^'.*'$|^\".*\"$/\r\n\r\n// Parser and tokenizer for getting the type and value from a string.\r\nexport function parseType(string) {\r\n  let type = PRIMITIVE\r\n  let value = string\r\n\r\n  if (QUOTED_STR.test(string)) {\r\n    value = string.slice(1, -1)\r\n  } else if (string === 'true') {\r\n    value = true\r\n  } else if (string === 'false') {\r\n    value = false\r\n  } else if (string === 'null') {\r\n    value = null\r\n  } else if (string === 'undefined') {\r\n    value = undefined\r\n  } else if (!isNaN(string)) {\r\n    value = Number(string)\r\n  } else {\r\n    type = KEYPATH\r\n  }\r\n\r\n  return {type: type, value: value}\r\n}\r\n\r\n// Template parser and tokenizer for mustache-style text content bindings.\r\n// Parses the template and returns a set of tokens, separating static portions\r\n// of text from binding declarations.\r\nexport function parseTemplate(template, delimiters) {\r\n  var tokens\r\n  let length = template.length\r\n  let index = 0\r\n  let lastIndex = 0\r\n  let open = delimiters[0], close = delimiters[1]\r\n\r\n  while (lastIndex < length) {\r\n    index = template.indexOf(open, lastIndex)\r\n\r\n    if (index < 0) {\r\n      if (tokens) {\r\n        tokens.push({\r\n          type: TEXT,\r\n          value: template.slice(lastIndex)\r\n        })\r\n      }\r\n\r\n      break\r\n    } else {\r\n      tokens || (tokens = [])\r\n      if (index > 0 && lastIndex < index) {\r\n        tokens.push({\r\n          type: TEXT,\r\n          value: template.slice(lastIndex, index)\r\n        })\r\n      }\r\n\r\n      lastIndex = index + open.length\r\n      index = template.indexOf(close, lastIndex)\r\n\r\n      if (index < 0) {\r\n        let substring = template.slice(lastIndex - close.length)\r\n        let lastToken = tokens[tokens.length - 1]\r\n\r\n        if (lastToken && lastToken.type === TEXT) {\r\n          lastToken.value += substring\r\n        } else {\r\n          tokens.push({\r\n            type: TEXT,\r\n            value: substring\r\n          })\r\n        }\r\n\r\n        break\r\n      }\r\n\r\n      let value = template.slice(lastIndex, index).trim()\r\n\r\n      tokens.push({\r\n        type: BINDING,\r\n        value: value\r\n      })\r\n\r\n      lastIndex = index + close.length\r\n    }\r\n  }\r\n\r\n  return tokens\r\n}\r\n","import {EXTENSIONS} from './constants'\r\nimport {parseTemplate, parseType} from './parsers'\r\n\r\nconst tinybind = {\r\n  // Global binders.\r\n  binders: {},\r\n\r\n  // Global formatters.\r\n  formatters: {},\r\n\r\n  // Global sightglass adapters.\r\n  adapters: {},\r\n\r\n  // Default attribute prefix.\r\n  _prefix: 'rv',\r\n\r\n  _fullPrefix: 'rv-',\r\n\r\n  get prefix () {\r\n    return this._prefix\r\n  },\r\n\r\n  set prefix (value) {\r\n    this._prefix = value\r\n    this._fullPrefix = value + '-'\r\n  },\r\n\r\n  parseTemplate: parseTemplate,\r\n\r\n  parseType: parseType,\r\n\r\n  // Default template delimiters.\r\n  templateDelimiters: ['{', '}'],\r\n\r\n  // Default sightglass root interface.\r\n  rootInterface: '.',\r\n\r\n  // Preload data by default.\r\n  preloadData: true,\r\n\r\n  // Default event handler.\r\n  handler: function(context, ev, binding) {\r\n    this.call(context, ev, binding.view.models)\r\n  },\r\n\r\n  // Sets the attribute on the element. If no binder above is matched it will fall\r\n  // back to using this binder.\r\n  fallbackBinder: function(el, value) {\r\n    if (value != null) {\r\n      el.setAttribute(this.type, value)\r\n    } else {\r\n      el.removeAttribute(this.type)\r\n    }  \r\n  },\r\n\r\n  // Merges an object literal into the corresponding global options.\r\n  configure: function(options) {\r\n    if (!options) {\r\n      return\r\n    }\r\n    Object.keys(options).forEach(option => {\r\n      let value = options[option]\r\n\r\n      if (EXTENSIONS.indexOf(option) > -1) {\r\n        Object.keys(value).forEach(key => {\r\n          this[option][key] = value[key]\r\n        })\r\n      } else {\r\n        this[option] = value\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nexport default tinybind\r\n","\r\n// Check if a value is an object than can be observed.\r\nfunction isObject(obj) {\r\n  return typeof obj === 'object' && obj !== null\r\n}\r\n\r\n// Error thrower.\r\nfunction error(message) {\r\n  throw new Error(`[Observer] ${message}`)\r\n}\r\n\r\nlet adapters;\r\nlet interfaces;\r\nlet rootInterface;\r\n\r\n// Constructs a new keypath observer and kicks things off.\r\nclass Observer {\r\n  static updateOptions (options) {\r\n    adapters = options.adapters\r\n    interfaces = Object.keys(adapters)\r\n    rootInterface = options.rootInterface\r\n  }\r\n  \r\n  // Tokenizes the provided keypath string into interface + path tokens for the\r\n  // observer to work with.\r\n  static tokenize (keypath, root) {\r\n    const tokens = [];\r\n    let current = {i: root, path: ''};\r\n    let index;\r\n    let chr;\r\n  \r\n    for (index = 0; index < keypath.length; index++) {\r\n      chr = keypath.charAt(index)\r\n  \r\n      if (!!~interfaces.indexOf(chr)) {\r\n        tokens.push(current)\r\n        current = {i: chr, path: ''}\r\n      } else {\r\n        current.path += chr\r\n      }\r\n    }\r\n  \r\n    tokens.push(current)\r\n    return tokens\r\n  }\r\n\r\n  constructor(obj, keypath, callback) {\r\n    this.keypath = keypath\r\n    this.callback = callback\r\n    this.objectPath = []\r\n    this.parse()\r\n    this.obj = this.getRootObject(obj)\r\n\r\n    if (isObject(this.target = this.realize())) {\r\n      this.set(true, this.key, this.target, this.callback)\r\n    }\r\n  }\r\n\r\n  // Parses the keypath using the interfaces defined on the view. Sets variables\r\n  // for the tokenized keypath as well as the end key.\r\n  parse() {\r\n    let path;\r\n    let root;\r\n\r\n    if (!interfaces.length) {\r\n      error('Must define at least one adapter interface.')\r\n    }\r\n\r\n    if (!!~interfaces.indexOf(this.keypath[0])) {\r\n      root = this.keypath[0]\r\n      path = this.keypath.substr(1)\r\n    } else {\r\n      root = rootInterface\r\n      path = this.keypath\r\n    }\r\n\r\n    this.tokens = Observer.tokenize(path, root)\r\n    this.key = this.tokens.pop()\r\n  }\r\n\r\n  // Realizes the full keypath, attaching observers for every key and correcting\r\n  // old observers to any changed objects in the keypath.\r\n  realize() {\r\n    let current = this.obj;\r\n    let unreached = -1;\r\n    let prev;\r\n    let token;\r\n\r\n    for (let index = 0; index < this.tokens.length; index++) {\r\n      token = this.tokens[index]\r\n      if (isObject(current)) {\r\n        if (typeof this.objectPath[index] !== 'undefined') {\r\n          if (current !== (prev = this.objectPath[index])) {\r\n            this.set(false, token, prev, this)\r\n            this.set(true, token, current, this)\r\n            this.objectPath[index] = current\r\n          }\r\n        } else {\r\n          this.set(true, token, current, this)\r\n          this.objectPath[index] = current\r\n        }\r\n\r\n        current = this.get(token, current)\r\n      } else {\r\n        if (unreached === -1) {\r\n          unreached = index\r\n        }\r\n\r\n        if (prev = this.objectPath[index]) {\r\n          this.set(false, token, prev, this)\r\n        }\r\n      }\r\n    }\r\n\r\n    if (unreached !== -1) {\r\n      this.objectPath.splice(unreached)\r\n    }\r\n\r\n    return current\r\n  }\r\n\r\n  // Updates the keypath. This is called when any intermediary key is changed.\r\n  sync() {\r\n    let next;\r\n    let oldValue;\r\n    let newValue;\r\n\r\n    if ((next = this.realize()) !== this.target) {\r\n      if (isObject(this.target)) {\r\n        this.set(false, this.key, this.target, this.callback)\r\n      }\r\n\r\n      if (isObject(next)) {\r\n        this.set(true, this.key, next, this.callback)\r\n      }\r\n\r\n      oldValue = this.value()\r\n      this.target = next\r\n      newValue = this.value()\r\n      if (newValue !== oldValue || newValue instanceof Function) this.callback.sync()\r\n    } else if (next instanceof Array) {\r\n      this.callback.sync()\r\n    }\r\n  }\r\n\r\n  // Reads the current end value of the observed keypath. Returns undefined if\r\n  // the full keypath is unreachable.\r\n  value() {\r\n    if (isObject(this.target)) {\r\n      return this.get(this.key, this.target)\r\n    }\r\n  }\r\n\r\n  // Sets the current end value of the observed keypath. Calling setValue when\r\n  // the full keypath is unreachable is a no-op.\r\n  setValue(value) {\r\n    if (isObject(this.target)) {\r\n      adapters[this.key.i].set(this.target, this.key.path, value)\r\n    }\r\n  }\r\n\r\n  // Gets the provided key on an object.\r\n  get(key, obj) {\r\n    return adapters[key.i].get(obj, key.path);\r\n  }\r\n\r\n  // Observes or unobserves a callback on the object using the provided key.\r\n  set(active, key, obj, callback) {\r\n    const action = active ? 'observe' : 'unobserve';\r\n    adapters[key.i][action](obj, key.path, callback)\r\n  }\r\n\r\n  // Unobserves the entire keypath.\r\n  unobserve() {\r\n    let obj;\r\n    let token;\r\n\r\n    for (let index = 0; index < this.tokens.length; index++) {\r\n      token = this.tokens[index]\r\n      if (obj = this.objectPath[index]) {\r\n        this.set(false, token, obj, this)\r\n      }\r\n    }\r\n\r\n    if (isObject(this.target)) {\r\n      this.set(false, this.key, this.target, this.callback)\r\n    }\r\n  }\r\n\r\n  // traverse the scope chain to find the scope which has the root property\r\n  // if the property is not found in chain, returns the root scope\r\n  getRootObject(obj) {\r\n    let rootProp;\r\n    let current;\r\n    if (!obj.$parent) {\r\n      return obj;\r\n    }\r\n\r\n    if (this.tokens.length) {\r\n      rootProp = this.tokens[0].path\r\n    } else {\r\n      rootProp = this.key.path\r\n    }\r\n\r\n    current = obj;\r\n    while (current.$parent && (current[rootProp] === undefined)) {\r\n      current = current.$parent\r\n    }\r\n\r\n    return current;\r\n  }\r\n}\r\n\r\nexport default Observer\r\n","import {parseType} from './parsers'\r\nimport Observer from './observer'\r\n\r\nfunction getInputValue(el) {  \r\n  if (el.type === 'checkbox') {\r\n    return el.checked\r\n  } else if (el.type === 'select-multiple') {\r\n    const results = []\r\n    let option\r\n    for (let i = 0; i < el.options.length; i++) {\r\n      option = el.options[i]\r\n      if (option.selected) {\r\n        results.push(option.value);\r\n      }\r\n    }\r\n    return results\r\n  } else {\r\n    return el.value\r\n  }\r\n}\r\n\r\nconst FORMATTER_ARGS =  /[^\\s']+|'([^']|'[^\\s])*'|\"([^\"]|\"[^\\s])*\"/g\r\nconst FORMATTER_SPLIT = /\\s+/\r\n\r\n// A single binding between a model attribute and a DOM element.\r\nexport class Binding {\r\n  // All information about the binding is passed into the constructor; the\r\n  // containing view, the DOM node, the type of binding, the model object and the\r\n  // keypath at which to listen for changes.\r\n  constructor(view, el, type, keypath, binder, arg, formatters) {\r\n    this.view = view\r\n    this.el = el\r\n    this.type = type\r\n    this.keypath = keypath\r\n    this.binder = binder\r\n    this.arg = arg\r\n    this.formatters = formatters\r\n    this.formatterObservers = {}\r\n    this.model = undefined\r\n  }\r\n\r\n  // Observes the object keypath\r\n  observe(obj, keypath) {\r\n    return new Observer(obj, keypath, this)\r\n  }\r\n\r\n  parseTarget() {\r\n    if (this.keypath) {\r\n      let token = parseType(this.keypath)\r\n\r\n      if (token.type === 0) {\r\n        this.value = token.value\r\n      } else {\r\n        this.observer = this.observe(this.view.models, this.keypath)\r\n        this.model = this.observer.target\r\n      }\r\n    } else {\r\n      this.value = undefined;\r\n    }\r\n  }\r\n\r\n  parseFormatterArguments(args, formatterIndex) {\r\n    return args\r\n      .map(parseType)\r\n      .map(({type, value}, ai) => {\r\n        if (type === 0) {\r\n          return value\r\n        } else {\r\n          if (!this.formatterObservers[formatterIndex]) {\r\n            this.formatterObservers[formatterIndex] = {}\r\n          }\r\n\r\n          let observer = this.formatterObservers[formatterIndex][ai]\r\n\r\n          if (!observer) {\r\n            observer = this.observe(this.view.models, value)\r\n            this.formatterObservers[formatterIndex][ai] = observer\r\n          }\r\n\r\n          return observer.value()\r\n        }\r\n      })\r\n  }\r\n\r\n  // Applies all the current formatters to the supplied value and returns the\r\n  // formatted value.\r\n  formattedValue(value) {\r\n    return this.formatters.reduce((result, declaration, index) => {\r\n      let args = declaration.match(FORMATTER_ARGS)\r\n      let id = args.shift()\r\n      let formatter = this.view.options.formatters[id]\r\n\r\n      const processedArgs = this.parseFormatterArguments(args, index)\r\n\r\n      if (formatter && (formatter.read instanceof Function)) {\r\n        result = formatter.read(result, ...processedArgs)\r\n      } else if (formatter instanceof Function) {\r\n        result = formatter(result, ...processedArgs)\r\n      }\r\n      return result\r\n    }, value)\r\n  }\r\n\r\n  // Returns an event handler for the binding around the supplied function.\r\n  eventHandler(fn) {\r\n    let binding = this\r\n    let handler = binding.view.options.handler\r\n\r\n    return function(ev) {\r\n      handler.call(fn, this, ev, binding)\r\n    }\r\n  }\r\n\r\n  // Sets the value for the binding. This Basically just runs the binding routine\r\n  // with the supplied value formatted.\r\n  set(value) {\r\n    if ((value instanceof Function) && !this.binder.function) {\r\n      value = this.formattedValue(value.call(this.model))\r\n    } else {\r\n      value = this.formattedValue(value)\r\n    }\r\n\r\n    let routineFn = this.binder.routine || this.binder\r\n\r\n    if (routineFn instanceof Function) {\r\n      routineFn.call(this, this.el, value)\r\n    }\r\n  }\r\n\r\n  // Syncs up the view binding with the model.\r\n  sync() {\r\n    if (this.observer) {\r\n      this.model = this.observer.target\r\n      this.set(this.observer.value())\r\n    } else {\r\n      this.set(this.value)\r\n    }\r\n  }\r\n\r\n  // Publishes the value currently set on the input element back to the model.\r\n  publish() {\r\n    if (this.observer) {\r\n      var value = this.formatters.reduceRight((result, declaration, index) => {\r\n        const args = declaration.split(FORMATTER_SPLIT)\r\n        const id = args.shift()\r\n        const formatter = this.view.options.formatters[id]\r\n        const processedArgs = this.parseFormatterArguments(args, index)\r\n\r\n        if (formatter && formatter.publish) {\r\n          result = formatter.publish(result, ...processedArgs)\r\n        }\r\n        return result\r\n      }, this.getValue(this.el))\r\n\r\n      this.observer.setValue(value)\r\n    }\r\n  }\r\n\r\n  // Subscribes to the model for changes at the specified keypath. Bi-directional\r\n  // routines will also listen for changes on the element to propagate them back\r\n  // to the model.\r\n  bind() {\r\n    this.parseTarget()\r\n\r\n    if (this.binder.hasOwnProperty('bind')) {\r\n      this.binder.bind.call(this, this.el)\r\n    }\r\n\r\n    if (this.view.options.preloadData) {\r\n      this.sync()\r\n    }\r\n  }\r\n\r\n  // Unsubscribes from the model and the element.\r\n  unbind() {\r\n    if (this.binder.unbind) {\r\n      this.binder.unbind.call(this, this.el)\r\n    }\r\n\r\n    if (this.observer) {\r\n      this.observer.unobserve()\r\n    }\r\n\r\n    Object.keys(this.formatterObservers).forEach(fi => {\r\n      let args = this.formatterObservers[fi]\r\n\r\n      Object.keys(args).forEach(ai => {\r\n        args[ai].unobserve()\r\n      })\r\n    })\r\n\r\n    this.formatterObservers = {}\r\n  }\r\n\r\n  // Updates the binding's model from what is currently set on the view. Unbinds\r\n  // the old model first and then re-binds with the new model.\r\n  update(models = {}) {\r\n    if (this.observer) {\r\n      this.model = this.observer.target\r\n    }\r\n\r\n    if (this.binder.update) {\r\n      this.binder.update.call(this, models)\r\n    }\r\n  }\r\n\r\n  // Returns elements value\r\n  getValue(el) {\r\n    if (this.binder && this.binder.getValue) {\r\n      return this.binder.getValue.call(this, el)\r\n    } else {\r\n      return getInputValue(el)\r\n    }\r\n  }\r\n}\r\n","import tinybind from './tinybind'\r\nimport {Binding} from './bindings'\r\nimport {parseTemplate} from './parsers'\r\n\r\nconst textBinder = {\r\n  routine: (node, value) => {\r\n    node.data = (value != null) ? value : ''\r\n  }\r\n}\r\n\r\nconst DECLARATION_SPLIT = /((?:'[^']*')*(?:(?:[^\\|']*(?:'[^']*')+[^\\|']*)+|[^\\|]+))|^$/g\r\n\r\nconst parseNode = (view, node) => {\r\n  let block = false\r\n\r\n  if (node.nodeType === 3) {\r\n    let tokens = parseTemplate(node.data, tinybind.templateDelimiters)\r\n\r\n    if (tokens) {\r\n      for (let i = 0; i < tokens.length; i++) {\r\n        let token = tokens[i]\r\n        let text = document.createTextNode(token.value)\r\n        node.parentNode.insertBefore(text, node)\r\n\r\n        if (token.type === 1) {\r\n          view.buildBinding(text, null, token.value, textBinder, null)\r\n        }\r\n      }\r\n\r\n      node.parentNode.removeChild(node)\r\n    }\r\n    block = true\r\n  } else if (node.nodeType === 1) {\r\n    block = view.traverse(node)\r\n  }\r\n\r\n  if (!block) {\r\n    for (let i = 0; i < node.childNodes.length; i++) {\r\n      parseNode(view, node.childNodes[i]);\r\n    }\r\n  }\r\n}\r\n\r\nconst bindingComparator = (a, b) => {\r\n  let aPriority = a.binder ? (a.binder.priority || 0) : 0\r\n  let bPriority = b.binder ? (b.binder.priority || 0) : 0\r\n  return bPriority - aPriority\r\n}\r\n\r\nconst trimStr = (str) => {\r\n  return str.trim()\r\n}\r\n\r\n// A collection of bindings built from a set of parent nodes.\r\nexport default class View {\r\n  // The DOM elements and the model objects for binding are passed into the\r\n  // constructor along with any local options that should be used throughout the\r\n  // context of the view and it's bindings.\r\n  constructor(els, models, options) {\r\n    if (els.jquery || els instanceof Array) {\r\n      this.els = els\r\n    } else {\r\n      this.els = [els]\r\n    }\r\n\r\n    this.models = models\r\n    this.options = options\r\n\r\n    this.build()\r\n  }\r\n\r\n\r\n  buildBinding(node, type, declaration, binder, arg) {\r\n    let pipes = declaration.match(DECLARATION_SPLIT).map(trimStr)\r\n\r\n    let keypath = pipes.shift()\r\n\r\n    this.bindings.push(new Binding(this, node, type, keypath, binder, arg, pipes))\r\n  }\r\n\r\n  // Parses the DOM tree and builds `Binding` instances for every matched\r\n  // binding declaration.\r\n  build() {\r\n    this.bindings = []\r\n\r\n    let elements = this.els, i, len;\r\n    for (i = 0, len = elements.length; i < len; i++) {\r\n      parseNode(this, elements[i])\r\n    }\r\n\r\n    this.bindings.sort(bindingComparator)\r\n  }\r\n\r\n  traverse(node) {\r\n    let bindingPrefix = tinybind._fullPrefix\r\n    let block = node.nodeName === 'SCRIPT' || node.nodeName === 'STYLE'\r\n    let attributes = node.attributes\r\n    let bindInfos = []\r\n    let starBinders = this.options.starBinders\r\n    var type, binder, identifier, arg\r\n\r\n\r\n    for (let i = 0, len = attributes.length; i < len; i++) {\r\n      let attribute = attributes[i]\r\n      if (attribute.name.indexOf(bindingPrefix) === 0) {\r\n        type = attribute.name.slice(bindingPrefix.length)\r\n        binder = this.options.binders[type]\r\n        arg = undefined\r\n\r\n        if (!binder) {\r\n          for (let k = 0; k < starBinders.length; k++) {\r\n            identifier = starBinders[k]\r\n            if (type.slice(0, identifier.length - 1) === identifier.slice(0, -1)) {\r\n              binder = this.options.binders[identifier]\r\n              arg = type.slice(identifier.length - 1)\r\n              break\r\n            }\r\n          }\r\n        }\r\n\r\n        if (!binder) {\r\n          binder = tinybind.fallbackBinder\r\n        }\r\n\r\n        if (binder.block) {\r\n          this.buildBinding(node, type, attribute.value, binder, arg)\r\n          node.removeAttribute(attribute.name)\r\n          return true;\r\n        }\r\n\r\n        bindInfos.push({attr: attribute, binder: binder, type: type, arg: arg})\r\n      }\r\n    }\r\n\r\n    for (let i = 0; i < bindInfos.length; i++) {\r\n      let bindInfo = bindInfos[i]\r\n      this.buildBinding(node, bindInfo.type, bindInfo.attr.value, bindInfo.binder, bindInfo.arg)\r\n      node.removeAttribute(bindInfo.attr.name)\r\n    }\r\n\r\n    return block\r\n  }\r\n\r\n  // Binds all of the current bindings for this view.\r\n  bind() {\r\n    this.bindings.forEach(binding => {\r\n      binding.bind()\r\n    })\r\n  }\r\n\r\n  // Unbinds all of the current bindings for this view.\r\n  unbind() {\r\n    this.bindings.forEach(binding => {\r\n      binding.unbind()\r\n    })\r\n  }\r\n\r\n  // Syncs up the view with the model by running the routines on all bindings.\r\n  sync() {\r\n    this.bindings.forEach(binding => {\r\n      binding.sync()\r\n    })\r\n  }\r\n\r\n  // Publishes the input values from the view back to the model (reverse sync).\r\n  publish() {\r\n    this.bindings.forEach(binding => {\r\n      if (binding.binder && binding.binder.publishes) {\r\n        binding.publish()\r\n      }\r\n    })\r\n  }\r\n\r\n  // Updates the view's models along with any affected bindings.\r\n  update(models = {}) {\r\n    Object.keys(models).forEach(key => {\r\n      this.models[key] = models[key]\r\n    })\r\n\r\n    this.bindings.forEach(binding => {\r\n      if (binding.update) {\r\n        binding.update(models)\r\n      }\r\n    })\r\n  }\r\n}\r\n","// The default `.` adapter that comes with tinybind.js. Allows subscribing to\r\n// properties on plain objects, implemented in ES5 natives using\r\n// `Object.defineProperty`.\r\n\r\nconst ARRAY_METHODS = [\r\n  'push',\r\n  'pop',\r\n  'shift',\r\n  'unshift',\r\n  'sort',\r\n  'reverse',\r\n  'splice'\r\n]\r\n\r\nconst adapter = {\r\n  counter: 0,\r\n  weakmap: {},\r\n\r\n  weakReference: function(obj) {\r\n    if (!obj.hasOwnProperty('__rv')) {\r\n      let id = this.counter++\r\n\r\n      Object.defineProperty(obj, '__rv', {\r\n        value: id\r\n      })\r\n    }\r\n\r\n    if (!this.weakmap[obj.__rv]) {\r\n      this.weakmap[obj.__rv] = {\r\n        callbacks: {}\r\n      }\r\n    }\r\n\r\n    return this.weakmap[obj.__rv]\r\n  },\r\n\r\n  cleanupWeakReference: function(data, refId) {\r\n    if (!Object.keys(data.callbacks).length) {\r\n      if (!(data.pointers && Object.keys(data.pointers).length)) {\r\n        delete this.weakmap[refId]\r\n      }\r\n    }\r\n  },\r\n\r\n  stubFunction: function(obj, fn) {\r\n    const original = obj[fn]\r\n    const data = this.weakReference(obj)\r\n    const weakmap = this.weakmap\r\n\r\n    obj[fn] = (...args) => {\r\n      let response = original.apply(obj, args)\r\n\r\n      Object.keys(data.pointers).forEach(refId => {\r\n        let k = data.pointers[refId]\r\n\r\n        if (weakmap[refId]) {\r\n          if (weakmap[refId].callbacks[k] instanceof Array) {\r\n            weakmap[refId].callbacks[k].forEach(callback => {\r\n              callback.sync()\r\n            })\r\n          }\r\n        }\r\n      })\r\n\r\n      return response\r\n    }\r\n  },\r\n\r\n  observeArray: function(value, refId, keypath) {\r\n    if (value instanceof Array) {\r\n      let data = this.weakReference(value)\r\n\r\n      if (!data.pointers) {\r\n        data.pointers = {}\r\n\r\n        ARRAY_METHODS.forEach(fn => {\r\n          this.stubFunction(value, fn)\r\n        })\r\n      }\r\n\r\n      if (!data.pointers[refId]) {\r\n        data.pointers[refId] = []\r\n      }\r\n\r\n      if (data.pointers[refId].indexOf(keypath) === -1) {\r\n        data.pointers[refId].push(keypath)\r\n      }\r\n    }\r\n  },\r\n\r\n  unobserveArray: function(value, refId, keypath) {\r\n    if ((value instanceof Array) && (value.__rv != null)) {\r\n      let data = this.weakmap[value.__rv]\r\n\r\n      if (data) {\r\n        let pointers = data.pointers[refId]\r\n\r\n        if (pointers) {\r\n          let idx = pointers.indexOf(keypath)\r\n\r\n          if (idx > -1) {\r\n            pointers.splice(idx, 1)\r\n          }\r\n\r\n          if (!pointers.length) {\r\n            delete data.pointers[refId]\r\n          }\r\n\r\n          this.cleanupWeakReference(data, value.__rv)\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  observe: function(obj, keypath, callback) {\r\n    let value    \r\n    const callbacks = this.weakReference(obj).callbacks\r\n\r\n    if (!callbacks[keypath]) {\r\n      callbacks[keypath] = []\r\n      let desc = Object.getOwnPropertyDescriptor(obj, keypath)\r\n\r\n      if (!desc || !(desc.get || desc.set || !desc.configurable)) {\r\n        value = obj[keypath]\r\n\r\n        Object.defineProperty(obj, keypath, {\r\n          enumerable: true,\r\n\r\n          get: () => {\r\n            return value\r\n          },\r\n\r\n          set: newValue => {\r\n            if (newValue !== value) {\r\n              this.unobserveArray(value, obj.__rv, keypath)\r\n              value = newValue\r\n              const data = this.weakmap[obj.__rv]\r\n\r\n              if (data) {\r\n                let callbacks = data.callbacks[keypath]\r\n\r\n                if (callbacks) {\r\n                  callbacks.forEach(cb => {\r\n                      cb.sync()\r\n                  })\r\n                }\r\n\r\n                this.observeArray(newValue, obj.__rv, keypath)\r\n              }\r\n            }\r\n          }\r\n        })\r\n      }\r\n    }\r\n\r\n    if (callbacks[keypath].indexOf(callback) === -1) {\r\n      callbacks[keypath].push(callback)\r\n    }\r\n\r\n    this.observeArray(obj[keypath], obj.__rv, keypath)\r\n  },\r\n\r\n  unobserve: function(obj, keypath, callback) {\r\n    let data = this.weakmap[obj.__rv]\r\n\r\n    if (data) {\r\n      let callbacks = data.callbacks[keypath]\r\n\r\n      if (callbacks) {\r\n        let idx = callbacks.indexOf(callback)\r\n\r\n        if (idx > -1) {\r\n          callbacks.splice(idx, 1)\r\n\r\n          if (!callbacks.length) {\r\n            delete data.callbacks[keypath]\r\n            this.unobserveArray(obj[keypath], obj.__rv, keypath)\r\n          }\r\n        }\r\n\r\n        this.cleanupWeakReference(data, obj.__rv)\r\n      }\r\n    }\r\n  },\r\n\r\n  get: function(obj, keypath) {\r\n    return obj[keypath]\r\n  },\r\n\r\n  set: (obj, keypath, value) => {\r\n    obj[keypath] = value\r\n  }\r\n}\r\n\r\nexport default adapter\r\n","import View from './view'\r\n\r\nconst getString = (value) => {\r\n  return value != null ? value.toString() : undefined\r\n}\r\n\r\nconst times = (n, cb) => {\r\n  for (let i = 0; i < n; i++) cb()\r\n}\r\n\r\nfunction createView(binding, data, anchorEl) {\r\n  let template = binding.el.cloneNode(true)\r\n  let view = new View(template, data, binding.view.options)\r\n  view.bind()\r\n  binding.marker.parentNode.insertBefore(template, anchorEl)\r\n  return view\r\n}\r\n\r\nconst binders = {\r\n  // Binds an event handler on the element.\r\n  'on-*': {\r\n    function: true,\r\n    priority: 1000,\r\n\r\n    unbind: function(el) {\r\n      if (this.handler) {\r\n        el.removeEventListener(this.arg, this.handler)\r\n      }\r\n    },\r\n\r\n    routine: function(el, value) {\r\n      if (this.handler) {\r\n        el.removeEventListener(this.arg, this.handler)\r\n      }\r\n\r\n      this.handler = this.eventHandler(value)\r\n      el.addEventListener(this.arg, this.handler)\r\n    }\r\n  },\r\n\r\n  // Appends bound instances of the element in place for each item in the array.\r\n  'each-*': {\r\n    block: true,\r\n\r\n    priority: 4000,\r\n\r\n    bind: function(el) {\r\n      if (!this.marker) {\r\n        this.marker = document.createComment(` tinybind: ${this.type} `)\r\n        this.iterated = []\r\n\r\n        el.parentNode.insertBefore(this.marker, el)\r\n        el.parentNode.removeChild(el)\r\n      } else {\r\n        this.iterated.forEach(view => {\r\n          view.bind()\r\n        })\r\n      }\r\n    },\r\n\r\n    unbind: function(el) {\r\n      if (this.iterated) {\r\n        this.iterated.forEach(view => {\r\n          view.unbind()\r\n        })\r\n      }\r\n    },\r\n\r\n    routine: function(el, collection) {\r\n      let modelName = this.arg\r\n      collection = collection || []\r\n      let indexProp = el.getAttribute('index-property') || '$index'\r\n\r\n      collection.forEach((model, index) => {\r\n        let data = {$parent: this.view.models}\r\n        data[indexProp] = index\r\n        data[modelName] = model\r\n        let view = this.iterated[index]\r\n\r\n        if (!view) {\r\n\r\n          let previous = this.marker\r\n\r\n          if (this.iterated.length) {\r\n            previous = this.iterated[this.iterated.length - 1].els[0]\r\n          }\r\n\r\n          view = createView(this, data, previous.nextSibling)\r\n          this.iterated.push(view)\r\n        } else {\r\n          if (view.models[modelName] !== model) {\r\n            // search for a view that matches the model\r\n            let matchIndex, nextView\r\n            for (let nextIndex = index + 1; nextIndex < this.iterated.length; nextIndex++) {\r\n              nextView = this.iterated[nextIndex]\r\n              if (nextView.models[modelName] === model) {\r\n                matchIndex = nextIndex\r\n                break\r\n              }\r\n            }\r\n            if (matchIndex !== undefined) {\r\n              // model is in other position\r\n              // todo: consider avoiding the splice here by setting a flag\r\n              // profile performance before implementing such change\r\n              this.iterated.splice(matchIndex, 1)\r\n              this.marker.parentNode.insertBefore(nextView.els[0], view.els[0])\r\n              nextView.models[indexProp] = index\r\n            } else {\r\n              //new model\r\n              nextView = createView(this, data, view.els[0])\r\n            }\r\n            this.iterated.splice(index, 0, nextView)\r\n          } else {\r\n            view.models[indexProp] = index\r\n          }\r\n        }\r\n      })\r\n\r\n      if (this.iterated.length > collection.length) {\r\n        times(this.iterated.length - collection.length, () => {\r\n          let view = this.iterated.pop()\r\n          view.unbind()\r\n          this.marker.parentNode.removeChild(view.els[0])\r\n        })\r\n      }\r\n\r\n      if (el.nodeName === 'OPTION') {\r\n        this.view.bindings.forEach(binding => {\r\n          if (binding.el === this.marker.parentNode && binding.type === 'value') {\r\n            binding.sync()\r\n          }\r\n        })\r\n      }\r\n    },\r\n\r\n    update: function(models) {\r\n      let data = {}\r\n\r\n      //todo: add test and fix if necessary\r\n\r\n      Object.keys(models).forEach(key => {\r\n        if (key !== this.arg) {\r\n          data[key] = models[key]\r\n        }\r\n      })\r\n\r\n      this.iterated.forEach(view => {\r\n        view.update(data)\r\n      })\r\n    }\r\n  },\r\n\r\n  // Adds or removes the class from the element when value is true or false.\r\n  'class-*': function(el, value) {\r\n    let elClass = ` ${el.className} `\r\n\r\n    if (!value === (elClass.indexOf(` ${this.arg} `) > -1)) {\r\n      if (value) {\r\n        el.className = `${el.className} ${this.arg}`\r\n      } else {\r\n        el.className = elClass.replace(` ${this.arg} `, ' ').trim()\r\n      }\r\n    }\r\n  },\r\n\r\n  // Sets the element's text value.\r\n  text: (el, value) => {\r\n    el.textContent = value != null ? value : ''\r\n  },\r\n\r\n  // Sets the element's HTML content.\r\n  html: (el, value) => {\r\n    el.innerHTML = value != null ? value : ''\r\n  },\r\n\r\n  // Shows the element when value is true.\r\n  show: (el, value) => {\r\n    el.style.display = value ? '' : 'none'\r\n  },\r\n\r\n  // Hides the element when value is true (negated version of `show` binder).\r\n  hide: (el, value) => {\r\n    el.style.display = value ? 'none' : ''\r\n  },\r\n\r\n  // Enables the element when value is true.\r\n  enabled: (el, value) => {\r\n    el.disabled = !value\r\n  },\r\n\r\n  // Disables the element when value is true (negated version of `enabled` binder).\r\n  disabled: (el, value) => {\r\n    el.disabled = !!value\r\n  },\r\n\r\n  // Checks a checkbox or radio input when the value is true. Also sets the model\r\n  // property when the input is checked or unchecked (two-way binder).\r\n  checked: {\r\n    publishes: true,\r\n    priority: 2000,\r\n\r\n    bind: function(el) {\r\n      var self = this;\r\n      if (!this.callback) {\r\n        this.callback = function () {\r\n          self.publish();\r\n        }\r\n      }\r\n      el.addEventListener('change', this.callback)\r\n    },\r\n\r\n    unbind: function(el) {\r\n      el.removeEventListener('change', this.callback)\r\n    },\r\n\r\n    routine: function(el, value) {\r\n      if (el.type === 'radio') {\r\n        el.checked = getString(el.value) === getString(value)\r\n      } else {\r\n        el.checked = !!value\r\n      }\r\n    }\r\n  },\r\n\r\n  // Sets the element's value. Also sets the model property when the input changes\r\n  // (two-way binder).\r\n  value: {\r\n    publishes: true,\r\n    priority: 3000,\r\n\r\n    bind: function(el) {\r\n      this.isRadio = el.tagName === 'INPUT' && el.type === 'radio';\r\n      if (!this.isRadio) {\r\n        this.event = el.getAttribute('event-name') || (el.tagName === 'SELECT' ? 'change' : 'input')\r\n\r\n        var self = this;\r\n        if (!this.callback) {\r\n          this.callback = function () {\r\n            self.publish();\r\n          }\r\n        }\r\n\r\n        el.addEventListener(this.event, this.callback)\r\n      }\r\n    },\r\n\r\n    unbind: function(el) {\r\n      if (!this.isRadio) {\r\n        el.removeEventListener(this.event, this.callback)\r\n      }\r\n    },\r\n\r\n    routine: function(el, value) {\r\n      if (this.isRadio) {\r\n        el.setAttribute('value', value)\r\n      } else {\r\n        if (el.type === 'select-multiple') {\r\n          if (value instanceof Array) {\r\n            for (let i = 0; i < el.length; i++) {\r\n              let option = el[i];\r\n              option.selected = value.indexOf(option.value) > -1\r\n            }\r\n          }\r\n        } else if (getString(value) !== getString(el.value)) {\r\n          el.value = value != null ? value : ''\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  // Inserts and binds the element and it's child nodes into the DOM when true.\r\n  if: {\r\n    block: true,\r\n    priority: 4000,\r\n\r\n    bind: function(el) {\r\n      if (!this.marker) {\r\n        this.marker = document.createComment(' tinybind: ' + this.type + ' ' + this.keypath + ' ');\r\n        this.attached = false\r\n\r\n        el.parentNode.insertBefore(this.marker, el)\r\n        el.parentNode.removeChild(el)\r\n      } else if (this.bound === false && this.nested) {\r\n        this.nested.bind()\r\n      }\r\n      this.bound = true\r\n    },\r\n\r\n    unbind: function() {\r\n      if (this.nested) {\r\n        this.nested.unbind()\r\n        this.bound = false\r\n      }\r\n    },\r\n\r\n    routine: function(el, value) {\r\n      if (!!value !== this.attached) {\r\n        if (value) {\r\n\r\n          if (!this.nested) {\r\n            this.nested = new View(el, this.view.models, this.view.options)\r\n            this.nested.bind()\r\n          }\r\n\r\n          this.marker.parentNode.insertBefore(el, this.marker.nextSibling)\r\n          this.attached = true\r\n        } else {\r\n          el.parentNode.removeChild(el)\r\n          this.attached = false\r\n        }\r\n      }\r\n    },\r\n\r\n    update: function(models) {\r\n      if (this.nested) {\r\n        this.nested.update(models)\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default binders\r\n","const formatters = {\r\n  watch: function(value) {\r\n    return value;\r\n  },\r\n\r\n  not: function(value) {\r\n    return !value;\r\n  },\r\n\r\n  negate: function(value) {\r\n    return !value;\r\n  }\r\n}\r\n\r\nexport default formatters","\r\nimport tinybind from './tinybind'\r\n\r\nclass Component extends HTMLElement {\r\n  static get observedAttributes() {\r\n    const template = this.template\r\n    if (!template) {\r\n      throw new Error(`No template declared for ${this.name}`)\r\n    }\r\n\r\n    this.__templateEl = document.createElement('template')\r\n    this.__templateEl.innerHTML = template\r\n    \r\n    const propAttributeMap = this.__propAttributeMap = {}\r\n    const attributes = []\r\n    const properties = this.properties\r\n    if (properties) {\r\n      Object.keys(properties).forEach(propName => {\r\n        const propConfig = properties[propName]\r\n        const attrName = typeof propConfig === 'string' ? propConfig : propName\r\n        propAttributeMap[attrName] = propName\r\n        attributes.push(attrName)\r\n      })\r\n    }    \r\n    return attributes\r\n  }\r\n\r\n  connectedCallback() {\r\n    const nodes = this.constructor.__templateEl.content.cloneNode(true)\r\n    this.__tinybindView = tinybind.bind(nodes, this)    \r\n    while (this.firstChild) {\r\n      this.removeChild(this.firstChild);\r\n    }\r\n    this.appendChild(nodes)\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.__tinybindView.unbind()    \r\n  }\r\n\r\n  attributeChangedCallback(name, old, value) {\r\n    if (old !== value) {      \r\n      const propName = this.constructor.__propAttributeMap[name]\r\n      this[propName] = value\r\n    }\r\n  }  \r\n}\r\n\r\nexport default Component","import tinybind from './tinybind'\r\nimport View from './view'\r\nimport {OPTIONS, EXTENSIONS} from './constants'\r\nimport adapter from './adapter'\r\nimport binders from './binders'\r\nimport formatters from './formatters'\r\nimport Observer from './observer'\r\nimport Component from './component'\r\n\r\n// Returns the public interface.\r\n\r\ntinybind.binders = binders\r\ntinybind.formatters = formatters\r\ntinybind.adapters['.'] = adapter\r\ntinybind.Component = Component\r\n\r\n// Binds some data to a template / element. Returns a tinybind.View instance.\r\ntinybind.bind = (el, models, options) => {\r\n  let viewOptions = {}\r\n  models = models || {}\r\n  options = options || {}\r\n\r\n  EXTENSIONS.forEach(extensionType => {\r\n    viewOptions[extensionType] = Object.create(null)\r\n\r\n    if (options[extensionType]) {\r\n      Object.keys(options[extensionType]).forEach(key => {\r\n        viewOptions[extensionType][key] = options[extensionType][key]\r\n      })\r\n    }\r\n\r\n    Object.keys(tinybind[extensionType]).forEach(key => {\r\n      if (!viewOptions[extensionType][key]) {\r\n        viewOptions[extensionType][key] = tinybind[extensionType][key]\r\n      }\r\n    })\r\n  })\r\n\r\n  OPTIONS.forEach(option => {\r\n    let value = options[option]\r\n    viewOptions[option] = value != null ? value : tinybind[option]\r\n  })\r\n\r\n  viewOptions.starBinders = Object.keys(viewOptions.binders).filter(function (key) {\r\n    return key.indexOf('*') > 0\r\n  })\r\n\r\n  Observer.updateOptions(viewOptions)\r\n\r\n  let view = new View(el, models, viewOptions)\r\n  view.bind()\r\n  return view\r\n}\r\n\r\nexport default tinybind\r\n"],"names":["OPTIONS","EXTENSIONS","PRIMITIVE","KEYPATH","TEXT","BINDING","QUOTED_STR","parseType","string","type","value","test","slice","undefined","isNaN","Number","parseTemplate","template","delimiters","tokens","length","index","lastIndex","open","close","indexOf","push","substring","lastToken","trim","tinybind","binders","formatters","adapters","_prefix","_fullPrefix","prefix","templateDelimiters","rootInterface","preloadData","handler","context","ev","binding","call","view","models","fallbackBinder","el","setAttribute","removeAttribute","configure","options","Object","keys","forEach","option","key","isObject","obj","error","message","Error","interfaces","Observer","updateOptions","tokenize","keypath","root","current","i","path","chr","charAt","callback","objectPath","parse","getRootObject","target","realize","set","substr","pop","unreached","prev","token","get","splice","sync","next","oldValue","newValue","Function","Array","setValue","active","action","unobserve","rootProp","$parent","getInputValue","checked","results","selected","FORMATTER_ARGS","FORMATTER_SPLIT","Binding","binder","arg","formatterObservers","model","observe","parseTarget","observer","parseFormatterArguments","args","formatterIndex","map","ai","formattedValue","reduce","result","declaration","match","id","shift","formatter","processedArgs","read","eventHandler","fn","function","routineFn","routine","publish","reduceRight","split","getValue","bind","hasOwnProperty","unbind","fi","update","textBinder","node","data","DECLARATION_SPLIT","parseNode","block","nodeType","text","document","createTextNode","parentNode","insertBefore","buildBinding","removeChild","traverse","childNodes","bindingComparator","a","b","aPriority","priority","bPriority","trimStr","str","View","els","jquery","build","pipes","bindings","elements","len","sort","bindingPrefix","nodeName","attributes","bindInfos","starBinders","identifier","attribute","name","k","attr","bindInfo","publishes","ARRAY_METHODS","adapter","counter","weakmap","weakReference","defineProperty","__rv","callbacks","cleanupWeakReference","refId","pointers","stubFunction","original","response","apply","observeArray","unobserveArray","idx","desc","getOwnPropertyDescriptor","configurable","enumerable","cb","getString","toString","times","n","createView","anchorEl","cloneNode","marker","removeEventListener","addEventListener","createComment","iterated","collection","modelName","indexProp","getAttribute","previous","nextSibling","matchIndex","nextView","nextIndex","elClass","className","replace","textContent","html","innerHTML","show","style","display","hide","enabled","disabled","self","isRadio","tagName","event","if","attached","bound","nested","watch","not","negate","Component","connectedCallback","nodes","constructor","__templateEl","content","__tinybindView","firstChild","appendChild","disconnectedCallback","attributeChangedCallback","old","propName","__propAttributeMap","createElement","propAttributeMap","properties","propConfig","attrName","HTMLElement","viewOptions","extensionType","create","filter"],"mappings":"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"}